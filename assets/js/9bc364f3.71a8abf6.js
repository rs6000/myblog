"use strict";(self.webpackChunkmyblog=self.webpackChunkmyblog||[]).push([[4119],{2231:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>o,toc:()=>i});var o=r(2316),t=r(4848),s=r(8453);const c={slug:"n8n",title:"\u5b89\u88dd n8n \u6e2c\u8a66\u4e2d123",authors:["smilehsu"],tags:["facebook","hello","docusaurus"],date:"2025-11-08T10:00"},a=void 0,l={authorsImageUrls:[void 0]},i=[{value:"\u524d\u8a00:",id:"\u524d\u8a00",level:3},{value:"\u767c\u5e03\u65e5\u671f: 2022 \u5e74 1 \u6708 19 \u65e5\u4e0b\u5348 12:21",id:"\u767c\u5e03\u65e5\u671f-2022-\u5e74-1-\u6708-19-\u65e5\u4e0b\u5348-1221",level:4},{value:"Reference:",id:"reference",level:3}];function d(n){const e={code:"code",h3:"h3",h4:"h4",hr:"hr",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h3,{id:"\u524d\u8a00",children:"\u524d\u8a00:"}),"\n",(0,t.jsx)(e.h4,{id:"\u767c\u5e03\u65e5\u671f-2022-\u5e74-1-\u6708-19-\u65e5\u4e0b\u5348-1221",children:"\u767c\u5e03\u65e5\u671f: 2022 \u5e74 1 \u6708 19 \u65e5\u4e0b\u5348 12:21"}),"\n",(0,t.jsx)(e.p,{children:"\u76ee\u524d\u6211\u628abitbucket \u7576\u4f5c\u7df4\u7fd2\u7bc4\u4f8b\u7684\u7a0b\u5f0f\u78bc\u5009\u5eab\uff0c\u7df4\u7fd2\u7528\u7684\u7bc4\u4f8b\u90fd\u6703\u653e\u9019 \u4e00\u822c\u7684side project \u6703\u653e\u5728github\uff0c\u7db2\u9801\u4e0a\u5167\u5d4c\u7684\u7a0b\u5f0f\u78bc\u6703\u7528 gits \u672c\u4f86\u5167\u5d4c\u7a0b\u5f0f\u78bc\u4e5f\u662f\u8981\u7528 bitbucket \u4f46\u662f\u6211\u627e\u4e0d\u5230\u53ef\u4ee5\u5167\u5d4c\u7684\u9078\u9805..."}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:'\r\n#!/bin/bash\r\n# ==========================================================\r\n# n8n \u81ea\u52d5\u5b89\u88dd\u8173\u672c\uff08\u5b50\u7db2\u57df\u7248\uff09\r\n# \u9069\u7528\uff1aUbuntu 20.04+ / 22.04 / 24.04\r\n# \u529f\u80fd\uff1a\r\n#   - \u5b89\u88dd Docker / Nginx / Certbot\r\n#   - \u5efa\u7acb n8n Docker \u5bb9\u5668\r\n#   - \u81ea\u52d5\u8a2d\u5b9a HTTPS (Let\'s Encrypt)\r\n#   - Watchtower \u81ea\u52d5\u66f4\u65b0 n8n\r\n#   - \u5168\u7a0b\u8a18\u9304 log\r\n# Ubuntu \u4e3b\u6a5f\u7cfb\u7d71\u5b89\u88dd\u5f8c \u5148\u57f7\u884c sudo apt update -y && sudo apt upgrade -y\r\n# \u56e0\u70ba\u66f4\u65b0\u6709\u9ede\u4e45\uff0c\u6211\u5c31\u4e0d\u5beb\u5728\u8173\u672c\u88e1\r\n# ==========================================================\r\n\r\nset -e\r\n\r\nLOG_FILE="/var/log/install-n8n-subdomain.log"\r\nexec > >(tee -a "$LOG_FILE") 2>&1\r\n\r\necho "=============================="\r\necho " \ud83d\ude80 n8n \u5b89\u88dd\u555f\u52d5"\r\necho "=============================="\r\n\r\n# ----------- \u4f7f\u7528\u8005\u8f38\u5165\u542b\u9810\u8a2d\u503c -----------\r\nread -p "\u8acb\u8f38\u5165\u8981\u5b89\u88dd n8n \u7684\u5b50\u7db2\u57df (\u9810\u8a2d: n8n.feylaibook.com): " DOMAIN\r\nDOMAIN=${DOMAIN:-n8n.feylaibook.com}\r\n\r\nread -p "\u8acb\u8f38\u5165\u4f60\u7684 Email (\u7528\u65bc SSL \u6191\u8b49\u8a3b\u518a\uff0c\u9810\u8a2d: smile.hsu@gmail.com): " EMAIL\r\nEMAIL=${EMAIL:-smile.hsu@gmail.com}\r\n\r\necho "\u4f7f\u7528\u7684\u5b50\u7db2\u57df: $DOMAIN"\r\necho "\u4f7f\u7528\u7684 Email: $EMAIL"\r\n\r\n# ----------- \u5b89\u88dd\u57fa\u672c\u5957\u4ef6 -----------\r\necho "[1/8] \u66f4\u65b0\u7cfb\u7d71\u4e26\u5b89\u88dd\u5fc5\u8981\u5957\u4ef6..."\r\n#sudo apt update -y && sudo apt upgrade -y\r\nsudo apt install -y curl wget gnupg2 ca-certificates lsb-release apt-transport-https software-properties-common ufw nginx\r\n\r\n# ----------- \u5b89\u88dd Docker \u8207 docker-compose -----------\r\necho "[2/8] \u5b89\u88dd Docker \u8207 docker-compose..."\r\nif ! command -v docker &> /dev/null; then\r\n    curl -fsSL https://get.docker.com | sudo bash\r\nfi\r\n\r\nif ! command -v docker compose &> /dev/null && ! command -v docker-compose &> /dev/null; then\r\n    sudo apt install -y docker-compose\r\nfi\r\n\r\nsudo systemctl enable docker\r\nsudo systemctl start docker\r\n\r\n# ----------- \u5b89\u88dd Certbot (SSL) -----------\r\necho "[3/8] \u5b89\u88dd Certbot..."\r\nsudo apt install -y certbot python3-certbot-nginx\r\n\r\n# ----------- \u5efa\u7acb n8n \u8cc7\u6599\u593e\u8207\u96a8\u6a5f\u5bc6\u78bc -----------\r\necho "[4/8] \u5efa\u7acb n8n \u8cc7\u6599\u593e\u8207\u96a8\u6a5f\u5bc6\u78bc..."\r\nsudo mkdir -p /root/n8n_data\r\nsudo chown -R 1000:1000 /root/n8n_data\r\nN8N_USER="admin"\r\nN8N_PASS=$(openssl rand -base64 12)\r\n\r\n# ----------- \u5efa\u7acb docker-compose.yml -----------\r\necho "[5/8] \u5efa\u7acb docker-compose.yml..."\r\ncat <<EOF | sudo tee /root/docker-compose.yml > /dev/null\r\nversion: "3.8"\r\nservices:\r\n  n8n:\r\n    image: n8nio/n8n:latest\r\n    container_name: n8n\r\n    restart: always\r\n    ports:\r\n      - "5678:5678"\r\n    environment:\r\n      - TZ=Asia/Taipei\r\n      - N8N_BASIC_AUTH_ACTIVE=true\r\n      - N8N_BASIC_AUTH_USER=$N8N_USER\r\n      - N8N_BASIC_AUTH_PASSWORD=$N8N_PASS\r\n      - N8N_HOST=$DOMAIN\r\n      - WEBHOOK_URL=https://$DOMAIN/\r\n      - GENERIC_TIMEZONE=Asia/Taipei\r\n    volumes:\r\n      - /root/n8n_data:/home/node/.n8n\r\nEOF\r\n\r\n# \u81ea\u52d5\u5075\u6e2c docker-compose \u6307\u4ee4\r\nif command -v docker compose &> /dev/null; then\r\n    COMPOSE_CMD="docker compose"\r\nelif command -v docker-compose &> /dev/null; then\r\n    COMPOSE_CMD="docker-compose"\r\nelse\r\n    echo "\u274c \u932f\u8aa4\uff1a\u627e\u4e0d\u5230 docker compose \u6216 docker-compose\uff0c\u8acb\u78ba\u8a8d Docker \u5df2\u6b63\u78ba\u5b89\u88dd\u3002"\r\n    exit 1\r\nfi\r\n\r\necho "[6/8] \u555f\u52d5 n8n \u5bb9\u5668..."\r\n$COMPOSE_CMD -f /root/docker-compose.yml up -d\r\n\r\n# ----------- \u5efa\u7acb Nginx \u8a2d\u5b9a\u6a94 -----------\r\necho "[7/8] \u5efa\u7acb Nginx \u8a2d\u5b9a\u6a94..."\r\nNGINX_CONF="/etc/nginx/sites-available/n8n"\r\nsudo bash -c "cat > $NGINX_CONF" <<EOF\r\nserver {\r\n    listen 80;\r\n    server_name $DOMAIN;\r\n    location / {\r\n        proxy_pass http://localhost:5678/;\r\n        proxy_http_version 1.1;\r\n        proxy_set_header Upgrade \\$http_upgrade;\r\n        proxy_set_header Connection \'upgrade\';\r\n        proxy_set_header Host \\$host;\r\n        proxy_cache_bypass \\$http_upgrade;\r\n    }\r\n}\r\nEOF\r\n\r\nsudo ln -sf /etc/nginx/sites-available/n8n /etc/nginx/sites-enabled/n8n\r\nsudo nginx -t && sudo systemctl reload nginx\r\n\r\n# ----------- SSL \u6191\u8b49 -----------\r\necho "[8/8] \u7533\u8acb SSL \u6191\u8b49..."\r\nsudo systemctl stop nginx\r\nsudo certbot certonly --standalone -d "$DOMAIN" -m "$EMAIL" --agree-tos --non-interactive\r\nsudo systemctl start nginx\r\n\r\n# \u555f\u7528 HTTPS\r\nsudo bash -c "cat > $NGINX_CONF" <<EOF\r\nserver {\r\n    listen 80;\r\n    server_name $DOMAIN;\r\n    return 301 https://\\$host\\$request_uri;\r\n}\r\nserver {\r\n    listen 443 ssl;\r\n    server_name $DOMAIN;\r\n    ssl_certificate /etc/letsencrypt/live/$DOMAIN/fullchain.pem;\r\n    ssl_certificate_key /etc/letsencrypt/live/$DOMAIN/privkey.pem;\r\n    ssl_protocols TLSv1.2 TLSv1.3;\r\n    ssl_ciphers HIGH:!aNULL:!MD5;\r\n    location / {\r\n        proxy_pass http://localhost:5678/;\r\n        proxy_http_version 1.1;\r\n        proxy_set_header Upgrade \\$http_upgrade;\r\n        proxy_set_header Connection \'upgrade\';\r\n        proxy_set_header Host \\$host;\r\n        proxy_cache_bypass \\$http_upgrade;\r\n    }\r\n}\r\nEOF\r\n\r\nsudo nginx -t && sudo systemctl reload nginx\r\n\r\n# ----------- \u9632\u706b\u7246\u8a2d\u5b9a -----------\r\necho "[3.5] \u8a2d\u5b9a\u9632\u706b\u7246 (UFW)..."\r\nsudo ufw allow OpenSSH\r\nsudo ufw allow 80/tcp\r\nsudo ufw allow 443/tcp\r\nsudo ufw --force enable\r\n\r\n# ----------- SSL \u81ea\u52d5\u7e8c\u671f -----------\r\necho "[8.5] \u8a2d\u5b9a SSL \u81ea\u52d5\u7e8c\u671f..."\r\n# Certbot \u81ea\u52d5\u7e8c\u671f\u670d\u52d9\u6703\u81ea\u52d5\u904b\u4f5c\uff0c\u6bcf\u5929\u6aa2\u67e5\r\nsudo systemctl enable certbot.timer\r\nsudo systemctl start certbot.timer\r\n\r\n\r\n# ----------- \u5b89\u88dd Watchtower -----------\r\necho "[9/9] \u5b89\u88dd Watchtower (\u81ea\u52d5\u66f4\u65b0 n8n)..."\r\nsudo docker run -d \\\r\n  --name watchtower \\\r\n  --restart unless-stopped \\\r\n  -v /var/run/docker.sock:/var/run/docker.sock \\\r\n  containrrr/watchtower:latest\r\n\r\n# ----------- \u5b8c\u6574\u5b89\u88dd\u8a0a\u606f -----------\r\necho ""\r\necho "=============================================="\r\necho "\u2705 n8n \u5b89\u88dd\u5b8c\u6210\uff01"\r\necho ""\r\necho "\ud83d\udccd \u7db2\u5740: https://$DOMAIN/"\r\necho "\ud83d\udc64 \u5e33\u865f: $N8N_USER"\r\necho "\ud83d\udd11 \u5bc6\u78bc: $N8N_PASS"\r\necho ""\r\necho "\ud83d\udce6 Docker Compose \u4f4d\u7f6e: /root/docker-compose.yml"\r\necho "\ud83e\udde9 Watchtower \u5df2\u555f\u7528\uff08\u6bcf5\u5206\u9418\u81ea\u52d5\u6aa2\u67e5 n8n \u66f4\u65b0\uff09"\r\necho ""\r\necho "\ud83d\udcdc \u5b89\u88dd\u65e5\u8a8c\uff1a$LOG_FILE"\r\necho "\ud83d\udd0d \u82e5\u51fa\u73fe\u932f\u8aa4\uff0c\u53ef\u6aa2\u67e5\u6700\u8fd1 50 \u884c\u65e5\u8a8c\uff1a"\r\necho "   tail -n 50 $LOG_FILE"\r\necho "=============================================="\r\n\r\n# \u986f\u793a\u76ee\u524d Docker \u5bb9\u5668\r\nsudo docker ps\r\n\n'})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-shell",metastring:"script"})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"reference",children:"Reference:"})]})}function u(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},2316:n=>{n.exports=JSON.parse('{"permalink":"/myblog/blog/n8n","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2025/1108/index.md","source":"@site/blog/2025/1108/index.md","title":"\u5b89\u88dd n8n \u6e2c\u8a66\u4e2d123","description":"\u524d\u8a00:","date":"2025-11-08T10:00:00.000Z","tags":[{"inline":false,"label":"Facebook","permalink":"/myblog/blog/tags/facebook","description":"Facebook tag description"},{"inline":false,"label":"Hello","permalink":"/myblog/blog/tags/hello","description":"Hello tag description"},{"inline":false,"label":"Docusaurus","permalink":"/myblog/blog/tags/docusaurus","description":"Docusaurus tag description"}],"readingTime":3.86,"hasTruncateMarker":true,"authors":[{"name":"Smile Hsu","title":"Full-stack developer ,Data Analyst","url":"https://smilehsu.cc","page":{"permalink":"/myblog/blog/authors/smilehsu"},"socials":{"github":"https://github.com/rs6000","newsletter":"https://smilehsu.cc"},"imageURL":"/myblog/img/authors/me.jpg","key":"smilehsu"}],"frontMatter":{"slug":"n8n","title":"\u5b89\u88dd n8n \u6e2c\u8a66\u4e2d123","authors":["smilehsu"],"tags":["facebook","hello","docusaurus"],"date":"2025-11-08T10:00"},"unlisted":false,"prevItem":{"title":"docusaurus\u90e8\u5c6c\u7684\u5c0f\u554f\u984c","permalink":"/myblog/blog/docusaurus-deploy-fix"},"nextItem":{"title":"\u5728 Ubuntu \u4e0a\u5b89\u88dd OpenVPN","permalink":"/myblog/blog/setup-openvpn-ubuntu"}}')},8453:(n,e,r)=>{r.d(e,{R:()=>c,x:()=>a});var o=r(6540);const t={},s=o.createContext(t);function c(n){const e=o.useContext(s);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:c(n.components),o.createElement(s.Provider,{value:e},n.children)}}}]);